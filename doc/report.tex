\documentclass{article}

\usepackage{booktabs}
\usepackage{comment}
\usepackage{graphicx}
\usepackage{mathtools}

\title{Algorithmics VU Programming Assignment Report}
\author{Jakob \textsc{Gruber}, Florian \textsc{Kleedorfer}}
\date{\today}

\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}

\begin{document}

\maketitle

\section{Problem Statement}

Let $G=(V,A,w)$ be a directed graph, $w: A \rightarrow R_0^+$ a non-negative weighting function,and $k \leq |V|, k \in N^+$. The goal is to find a minimum weight tree spanning exactly $k$ nodes.

The problem must be solved by (mixed) integer linear programs in three variants:
\begin{enumerate}
	\item Miller-Zucker-Temlin subtour elimination constraints,
	\item single commodity flows, and
	\item multi commodity flows.
\end{enumerate}
Problem instances are provided. For each instance, results have to be stated for $k = \ceil[\big]{\frac{1}{5}|V|}$ and  $k = \ceil[\big]{\frac{1}{2}|V|}$. The results must comprise:
\begin{enumerate}
\item the objective function value,
\item the number of branch and bound nodes, and
\item the running time
\end{enumerate}

\section{MLP formulation} 
\subsection{General}
This section contains the generic portion of the MLP formulation that is common to all three formulations.

The problem solution involves an artificial root node that is added to the graph. It has index 0 and outgoing arcs connecting it to each other node of the graph. Nevertheless, we denote the set of all nodes, including the artificial root node, as $V$, and the set of all arcs, including those of the artificial root node, as $A$. The constant $n$ is the size of the original graph: $n = |V| - 1$.

\subsubsection{Variables}
\begin{eqnarray}
\forall(i,j)\in A: x_{ij} \in \{0,1\}  && \text{arc $(i,j)$ is selected} \\
\forall i \in \{0,\ldots,n\}: v_i \in \{0, 1\} && \text{node $i$ is selected} 
\end{eqnarray}
\subsubsection{Constraints}
Exactly $k$ nodes must be selected, not counting the artificial node $0$.
\begin{equation}
\sum_{i\in\{1,\ldots,|V|\}} v_i = k
\end{equation}
Exactly $k-1$ edges must be selected, not counting the edges involving the artificial root node $0$:
\begin{equation}
\sum_{i>0, j>0, (i,j)\in A} x_{ij} = k - 1 
\end{equation}
Exactly one arc from the artificial root node to one of the other nodes is chosen. This means that exactly one node is chosen as root of the minimum spanning tree:
\begin{equation}
\sum_{j=1}^{n} x_{0j} = 1
\end{equation}
No arc may lead back to the artificial root node:
\begin{equation}
\sum_{j=1}^{n} x_{j0} = 0
\end{equation}
Deselected nodes have no selected outgoing arcs. Selected nodes have at most $k - 1$ selected outgoing arcs:
\begin{equation}
\forall i \in \{1,\ldots,n\}: (k-1)v_i \geq \sum_{j:(i,j)\in A} x_{ij}
\end{equation}
Exactly one incoming selected edge for a selected node and none for a deselected node (omitting artificial root):
\begin{equation}
\forall j\in\{1,\ldots,n\}: \sum_{i\in\{1,\ldots,n\}} x_{ij} = v_j
\end{equation}
Active nodes have at least one active arc:
\begin{equation}
\forall i\in\{0,\ldots,n\}:  v_i \leq \sum_{j:(i,j)\in A} (x_{ij} + x_{ji})
\end{equation}

\subsubsection{Objective Function}
\begin{equation}
\min \sum_{(i, j) \in A, i>0, j>0} x_{ij},w(i,j) 
\end{equation}

\subsection{MTZ Subtour Eliminiation}

% TODO: Double-check correctness & completeness of this section.

\subsubsection{Variables}
\begin{eqnarray}
u_i \in [0,r]  && \text{level of node $i$}
\end{eqnarray}
\subsubsection{Constraints}
The artificial root node has level $0$:
\begin{equation}
u_0 = 0
\end{equation}
Enforce level hierarchy on nodes in the tree:
\begin{equation}
\forall i, j \in\{0,\ldots,n\}: u_i + x_{ij} \leq u_j + (1 - x_{ij})k
\end{equation}
Force level of deselected nodes to $0$:
\begin{equation}
\forall i \in \{0,\ldots,n\}: u_i \leq nv_i
\end{equation}

\subsection{Single Commodity Flow}
\subsubsection{Variables}
\begin{eqnarray}
f_{ij} \in [0, k]  && \text{number of resources on edge } x_{ij}
\end{eqnarray}
\subsubsection{Constraints}
Every active node consumes exactly one resource:
\begin{equation}
\forall i \in \{0,\ldots,n\}: v_i = \sum_{j: (j, i) \in A} f_{ji} - \sum_{j: (i, j) \in A} f_{ij}
\end{equation}
Only active arcs transport resources, and the number of resources is $\leq k$:
\begin{equation}
\forall i, j \neq 0: f_{ij} \leq kx_{ij}
\end{equation}
Only a single arc incident on the artificial root transports resources, and that arc
has exactly $k$ resources:
\begin{equation}
\forall i, j \text{ s.t. i or j is 0}: f_{ij} = kx_{ij}
\end{equation}

\subsection{Multi Commodity Flow}
\subsubsection{Variables}
\begin{eqnarray}
\end{eqnarray}
\subsubsection{Constraints}

\section{Results and Discussion}

% TODO: Specify units in table, benchmarking machine specs, how many repetitions,
% how did we aggregate them (should be min), specify the command to execute the tests.

\begin{figure}[H]
\centering
\begin{tabular}{lllllllllll}
\toprule
Instance & $k$ & \multicolumn{3}{c}{MTZ} & \multicolumn{3}{c}{SCF} & \multicolumn{3}{c}{MCF} \\
& & Result & B\&B & Time &
    Result & B\&B & Time &
    Result & B\&B & Time \\
\midrule
01.dat & 2 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
\bottomrule
\end{tabular}
\caption{Runtimes in nanoseconds per add() operation on 4 cores.} % TODO: Change me
\label{fig:go}
\end{figure}

\begin{comment}
Create a short document (preferably in LaTeX) of about 3
pages containing:
* Problem description
* SCF, MCF, and MTZ formulations, and descriptions of used
variables and constraints
* Result table comparing all 3 formulations, including
objective function values, running times, numbers of branch-and-bound nodes
* Short interpretation of results

TODO: MCF formulations
TODO: Bench results
TODO: Discussion
\end{comment}

\end{document}
